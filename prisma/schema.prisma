generator client {
  provider = "prisma-client"
  output   = "../src/generated/prisma"
}

datasource db {
  provider = "postgresql"
}

// =============================================================================
// Enums
// =============================================================================

enum UserRole {
  LEARNER
  TUTOR
  ADMIN
}

enum ConfigType {
  STRING
  NUMBER
  BOOLEAN
  JSON
}

// =============================================================================
// Platform Configuration (Tier 2 — runtime-editable business settings)
// =============================================================================

model PlatformConfig {
  id          String     @id @default(cuid())
  key         String     @unique
  value       Json
  type        ConfigType @default(STRING)
  category    String
  description String?
  isPublic    Boolean    @default(false)
  createdAt   DateTime   @default(now())
  updatedAt   DateTime   @updatedAt

  @@index([category])
  @@map("platform_configs")
}

// =============================================================================
// Internationalization
// =============================================================================

model Locale {
  id         String   @id @default(cuid())
  code       String   @unique
  name       String
  nativeName String
  isDefault  Boolean  @default(false)
  isEnabled  Boolean  @default(true)
  isRTL      Boolean  @default(false)
  sortOrder  Int      @default(0)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt

  @@map("locales")
}

model Translation {
  id        String   @id @default(cuid())
  locale    String
  namespace String
  key       String
  value     String
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@unique([locale, namespace, key])
  @@index([locale, namespace])
  @@map("translations")
}

// =============================================================================
// Users (minimal stub — expanded in Week 2 with auth, profiles, etc.)
// =============================================================================

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  name      String?
  role      UserRole @default(LEARNER)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("users")
}
